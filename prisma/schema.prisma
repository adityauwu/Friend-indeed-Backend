generator client {
  provider = "prisma-client-js"
}

generator dbml {
  provider = "prisma-dbml-generator"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Therapist {
  id              String                @id @default(cuid())
  name            String?
  email           String                @unique
  imageUrl        String?
  about           String?
  rating          Int?
  experience      Int?
  onboarded       Boolean?              @default(false)
  consultationFee Int?
  createdAt       DateTime?             @default(now())
  updatedAt       DateTime?             @updatedAt
  active          Boolean               @default(true)
  feedback        Feedback[]
  categories      TherapistCategories[]
}

model TherapistCategories {
  id          String     @id @default(cuid())
  therapistId String?
  categoryId  String?
  experience  Int        @default(0)
  category    Category?  @relation(fields: [categoryId], references: [id])
  therapist   Therapist? @relation(fields: [therapistId], references: [id])
}

model Patient {
  id        String     @id @default(cuid())
  name      String
  email     String     @unique
  imageUrl  String?
  active    Boolean?   @default(true)
  createdAt DateTime?  @default(now())
  updatedAt DateTime?  @updatedAt
  feedback  Feedback[]
}

model Category {
  id         String                @id @default(cuid())
  name       String                @unique
  active     Boolean?              @default(true)
  createdAt  DateTime?             @default(now())
  updatedAt  DateTime?             @updatedAt
  therapists TherapistCategories[]
}

model Feedback {
  id          String    @id @default(cuid())
  patientId   String
  therapistId String
  rating      Int
  comment     String
  createdAt   DateTime? @default(now())
  updatedAt   DateTime? @updatedAt
  patient     Patient   @relation(fields: [patientId], references: [id])
  therapist   Therapist @relation(fields: [therapistId], references: [id])

  @@unique([patientId, therapistId])
}
